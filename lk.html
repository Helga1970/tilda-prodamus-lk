<a href="#" onclick="goToPage('chitalnyizal'); return false;">Читальный зал</a>

<script>
const user = JSON.parse(localStorage.getItem('user'));

const goToPage = async (pageName) => {
    try {
        const response = await fetch(`/api/get-content?page=${pageName}`, {
            headers: { 'X-User-Email': user.email }
        });

        if (!response.ok) {
            alert(await response.text());
            return;
        }

        const data = await response.json();
        // Переход на функцию redirect через /api
        window.location.href = `/api/redirect?token=${encodeURIComponent(data.token)}`;
    } catch (e) {
        alert('Ошибка перехода на страницу.');
    }
};
</script>
